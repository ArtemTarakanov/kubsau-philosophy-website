import { memo, useCallback } from 'react'
import './Articles.css'

const defaultPosts = [
  {
    id: 1,
    title: 'Экология сознания',
    excerpt: 'Как наше внутреннее состояние отражает состояние природы вокруг нас',
    image: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800&q=80',
    content: `<h2>Экология сознания: внутренняя природа человека</h2><p>В современном мире мы часто говорим об экологии окружающей среды, но редко задумываемся об экологии нашего внутреннего мира. Между тем, состояние нашего сознания напрямую связано с тем, как мы взаимодействуем с природой.</p><h3>Зеркало природы</h3><p>Наше сознание подобно лесу: оно может быть чистым и светлым, наполненным жизнью, или загрязненным, заросшим сорняками негативных мыслей. Как лес нуждается в заботе и очищении, так и наше сознание требует постоянного внимания.</p><p>Когда мы находимся в гармонии с собой, мы естественным образом начинаем бережнее относиться к окружающему миру. Это не случайность – это проявление глубинной связи между внутренним и внешним.</p><h3>Практика осознанности</h3><p>Древние философы понимали эту связь интуитивно. Они проводили время в созерцании природы не просто для отдыха, но для того, чтобы настроить свое внутреннее состояние в резонанс с естественными ритмами мира.</p><p>Современная наука подтверждает: время, проведенное на природе, снижает уровень стресса, улучшает когнитивные функции и способствует эмоциональному равновесию. Но это работает в обе стороны – чистое сознание позволяет нам глубже воспринимать красоту природы.</p><h3>Путь к гармонии</h3><p>Экология сознания начинается с простых вещей: осознанного дыхания, внимательного наблюдения за своими мыслями, регулярного пребывания на природе. Это не требует особых усилий, но требует постоянства.</p><p>Когда мы очищаем свое сознание от информационного шума, от навязчивых мыслей и тревог, мы обнаруживаем, что внутри нас есть то же спокойствие, что и в глубине леса. Та же мудрость, что и в течении реки. Та же жизненная сила, что и в росте растений.</p><h3>Заключение</h3><p>Забота об экологии сознания – это не эгоистичное занятие. Это вклад в общее благополучие, потому что люди с чистым сознанием создают более гармоничный мир вокруг себя. Они не могут не заботиться о природе, потому что чувствуют себя ее частью.</p><p>Начните с малого: проведите десять минут в тишине, наблюдая за деревом или облаками. Позвольте природе научить вас быть собой.</p>`
  },
  {
    id: 2,
    title: 'Ритмы природы',
    excerpt: 'Исследование циклических процессов в природе и их влияние на человека',
    image: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=800&q=80',
    content: `<h2>Ритмы природы: синхронизация с миром</h2><p>Природа живет в ритмах – смена дня и ночи, приливы и отливы, времена года. Эти циклы формировали жизнь на Земле миллионы лет, и человек не исключение.</p><h3>Циркадные ритмы</h3><p>Наши внутренние биологические часы настроены на 24-часовой цикл. Когда мы живем в согласии с этим ритмом, наше здоровье и благополучие улучшаются естественным образом.</p><p>Современный образ жизни часто нарушает эту гармонию. Искусственное освещение, ночная работа, постоянная стимуляция – все это сбивает наши внутренние часы.</p><h3>Сезонные изменения</h3><p>Каждое время года несет свою энергию и мудрость. Весна – время обновления, лето – расцвета, осень – сбора урожая, зима – отдыха и накопления сил.</p><p>Когда мы осознанно проживаем эти циклы, мы обретаем глубокое понимание естественного течения жизни. Мы учимся принимать периоды активности и покоя как равноценные части целого.</p><h3>Возвращение к природным ритмам</h3><p>Синхронизация с природными ритмами не требует радикальных изменений. Начните с простого: просыпайтесь с рассветом, проводите время на свежем воздухе, замечайте смену сезонов.</p><p>Эти маленькие шаги помогут вам восстановить связь с естественными циклами и обрести внутреннюю гармонию.</p>`
  },
  {
    id: 3,
    title: 'Медитация в движении',
    excerpt: 'Практика осознанности через взаимодействие с природными элементами',
    image: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&q=80',
    content: `<h2>Медитация в движении: путь осознанности</h2><p>Медитация не обязательно означает неподвижное сидение. Движение на природе может стать глубокой практикой осознанности, если подходить к нему с правильным намерением.</p><h3>Ходьба как практика</h3><p>Медитативная ходьба – это искусство присутствия в каждом шаге. Когда мы идем по лесной тропе или вдоль берега реки, мы можем полностью погрузиться в настоящий момент.</p><p>Почувствуйте землю под ногами, услышьте шелест листьев, ощутите дыхание ветра. Каждый шаг становится актом осознанности, каждый момент – возможностью для присутствия.</p><h3>Единство с природой</h3><p>В движении мы не просто наблюдаем природу – мы становимся ее частью. Наше дыхание синхронизируется с ритмом шагов, наше сердцебиение откликается на окружающую красоту.</p><p>Это не абстрактная философия, а живой опыт единства. Когда границы между "я" и "природой" растворяются, мы обретаем глубокое чувство принадлежности.</p><h3>Практические рекомендации</h3><p>Начните с коротких прогулок. Оставьте телефон дома. Идите медленно, без цели и спешки. Позвольте природе вести вас.</p><p>Обращайте внимание на детали: текстуру коры, игру света в листве, звуки птиц. Каждая прогулка – это возможность вернуться домой, к себе настоящему.</p>`
  }
]

const ArticleCard = memo(({ post, isAdmin, onEdit, onDelete, onClick }) => {
  const handleEdit = useCallback((e) => {
    e.stopPropagation()
    onEdit(post)
  }, [post, onEdit])

  const handleDelete = useCallback((e) => {
    e.stopPropagation()
    onDelete(post.id)
  }, [post.id, onDelete])

  return (
    <article className="article-card" onClick={() => onClick(post)}>
      {isAdmin && (
        <div className="article-admin-actions">
          <button className="edit-article-btn" onClick={handleEdit} title="Редактировать">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
          </button>
          <button className="delete-article-btn" onClick={handleDelete} title="Удалить">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M10 11v6M14 11v6" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
          </button>
        </div>
      )}
      <div className="article-image">
        <img src={post.image} alt={post.title} loading="lazy" />
      </div>
      <div className="article-body">
        <h3>{post.title}</h3>
        <p>{post.excerpt}</p>
        <button className="article-read-btn">ЧИТАТЬ</button>
      </div>
    </article>
  )
})

ArticleCard.displayName = 'ArticleCard'

const Articles = memo(({ onClick, customPosts = [], isAdmin, onAdd, onDelete, onEdit }) => {
  const all = [...customPosts, ...defaultPosts]
  
  return (
    <section className="article-grid" id="articles">
      <div className="article-grid-content">
        <div className="section-header">
          <div className="section-title-wrapper">
            <h2 className="section-title">Статьи</h2>
            <div className="nav-arrows">
              <button className="nav-arrow">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M15 18L9 12L15 6" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                </svg>
              </button>
              <button className="nav-arrow">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M9 18L15 12L9 6" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                </svg>
              </button>
            </div>
          </div>
          <p className="section-subtitle">
            Философские размышления о природе, сознании и гармонии
          </p>
          {isAdmin && (
            <button className="add-article-btn" onClick={onAdd}>
              Добавить статью
            </button>
          )}
        </div>
        
        <div className="articles">
          {all.map(post => (
            <ArticleCard
              key={post.id}
              post={post}
              isAdmin={isAdmin}
              onEdit={onEdit}
              onDelete={onDelete}
              onClick={onClick}
            />
          ))}
        </div>
      </div>
    </section>
  )
})

Articles.displayName = 'Articles'

export default Articles
